name: Check for Updated Dependencies
on:
  schedule:
    - cron: "0 0 * * *" # Daily at midnight
  workflow_dispatch:

# Note: I should receive an email notification when this workflow fails since I last modified it and the cron. Can generalize as needed (e.g. to creating a Github issue)

jobs:
  chainguard-images:
    runs-on: ubuntu-22.04
    steps:
      - name: Check overview page
        run: |
          curl https://edu.chainguard.dev/chainguard/chainguard-images/reference/python/overview/ | grep sha256:2b0426aff71001b9dc34723cc407cddca8ca88628a44ed5e2d484efd2cf22009

      # If this fails, that likely means the "latest" and "latest-dev" tags for Python are pointing at new images with new digests
      # Follow the process to update the Dockerfiles accordingly, then update the hardcoded digest here to be one of the new digests (doesn't matter which one) to detect future changes
